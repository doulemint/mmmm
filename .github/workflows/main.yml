name: pipeline_check
on: [push]
jobs:
  job1:
    runs-on: ubuntu-latest
    container: 
      image: vistalab/fsl-v5.0
    steps:
    - name: check fsl
      run: |
        whereis fsl
        echo $FSLDIR
    - name: install python dependencies
      run: |
        apt-get -y update
        apt-get -y upgrade 
        apt-get update && apt-get install -y python3 python3-pip python3-apt
        echo "alias python=python3" >> ~/.bashrc
        /bin/bash -c "source ~/.bashrc"
        python --version
        pip3 install --upgrade pip
        pip3 install gdown
    - name: cache data
      id: cache-data
      uses: actions/cache@v3
      with:
        path: cache-data
        key: ${{runner.os}}-data
    - name: download dataset
      run: |
        gdown "1N2wWheD56WxViYIl7UrDUfhwSxkGXP7E&confirm=t" -O ./cache-data
        unzip ./cache-data/pipeline_example.zip
        ls ./cache-data/pipeline_example

        
